<!DOCTYPE ><!--该页面由三种用户所公用-->
<html>
    <title>竞赛申报系统</title>
    <head>
		<script src="./layui/layui.js"></script>
		<link href="./layui/css/layui.css"  rel="stylesheet"/>
		<script src="./host.js"></script>
        <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
        <style>
            #mainContent{
                height: 90%;
                width: 80%;
                float:left;
                margin:2% 0 0 10%;
                background-color:#ffffff;
            }
        </style>
        
    </head>
    <body style="background: #eeeeee;">
        <div style="width: 100%;height: 80px;background:RGB(57,61,73)" id="nav">
            <div style="width: 15%;height: 100%;float: left;display: inline-block"></div>
            <div style="width: 35%;height: 80px;display: inline-block;">
                <ul class="layui-nav" lay-filter="" style="height: 80px; line-height: 80px">
                    <li class="layui-nav-item"><a href="newIndex.html">主页信息</a></li>
                    <li class="layui-nav-item"><a href="detailOfRaces.html">当前竞赛</a></li>
                    <li class="layui-nav-item layui-this"><a href="workList.html">评分管理</a></li>
                </ul>
            </div>
            <div style="width: 15%;height: 100%;float: right;display: inline-block"></div>
            <div style="width: 35%;height: 80px;display: inline-block;float: right">
                <ul class="layui-nav" style="text-align: right;height: 80px; line-height: 80px">
                    <li class="layui-nav-item">
                        <a href="messageReminder.html">消息提醒<span class="layui-badge-dot"></span></a>
                    </li>
                    <li class="layui-nav-item">
                        <a href="javascript:"><img alt="" src="./img/男.png" height="658"width="658" class="layui-nav-img">我</a>
                        <dl class="layui-nav-child">
                            <dd><a href="infoOfStudent.html">个人信息</a></dd>
                            <dd><a href="index.html" >登出</a></dd>
                        </dl>
                    </li>
                </ul>
            </div>
        </div>
        <div id="mainContent" style="width: 70%;height: 85%;margin: 20px 15% 0 15%;background: white; border-radius: 10px;"> 
                <fieldset class="layui-elem-field layui-field-title" style="margin:10px 0 0 0"><legend style="font-size:28px">&nbsp&nbsp待评分的作品</legend><div class="layui-field-box"></div></fieldset>
                <div id="workListBox" style="margin-top:10px;width:90%;margin: auto;height:80%">
                    <table id="workTable" lay-filter="workTable"></table>
                </div>
        </div>
        
        </div>
                        
                
             
    </body>
    <script>
        layui.use('element', function(){
			var element = layui.element;
		});
    </script>
    <script type="text/html" id="Bar">
		<a class="layui-btn layui-btn-primary layui-btn-xs" lay-event="detail"><i class="layui-icon">&#xe615;</i></a>
	</script>
	<script type="text/html" id="TableBar">
			<a class="layui-btn layui-btn-xs" lay-event="show">查看</a>
			<a class="layui-btn layui-btn-xs" lay-event="grade">打分</a>
			<a class="layui-btn layui-btn-xs" lay-event="download">下载</a>
	</script>
    <script>
		var user=JSON.parse(sessionStorage.getItem("user"));
        layui.use('table', function(){
		  var table = layui.table;
		  
		  $.ajax({
		  				type:"GET",
		  				url: hostIP+"studentProject?expertID="+user.account,
		  				dataType:"json",
		  				contentType:"application/json", 
		  				success:function(data){
		  								table.render({
		  										elem: "#workTable",
		  										cols: [[ //标题栏
		  												{field: 'projectPeriod', width:150, title: '阶段',sort:true},
		  												{field: 'projectID', title: '作品代码',sort:true},
		  												{field: 'projectName', title: '作品名',sort:true},
		  												{field: 'id', title: '数据库编号',hide:true},
		  												{title:'操作', toolbar: '#TableBar', width:200 }
		  										]]
		  										,data:data.data,
												height:$("#workListBox").height()-20
		  										//,size:'sm'
		  										// ,even: true
		  										,page: true
		  								});
		  								table.on('tool(workTable)', function(obj){
		  										var data = obj.data;
												if(obj.event==='show'){
													sessionStorage.setItem("projectID",JSON.stringify({projectID:data.id}));
													window.location.href="projectInfo.html";
												}
		  										if(obj.event==='grade'){
		  												layer.msg("打分还没做！",{time:1000,icon:5});
		  										}
												if(obj.event==='download'){
														layer.msg("下载还没做！",{time:1000,icon:5});
												}
		  								});
		  				},
		  				error:function(){
		  						layer.msg("网络问题无法获得数据",{time:1000,icon:5});
		  				}
		  		});
		  
		  
		});
    </script>
</html>